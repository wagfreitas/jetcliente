!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[6581],{532:function(t,n,a){"use strict";a.r(n),a.d(n,{MapPageModule:function(){return b}});var i,r,c=a(8583),l=a(3679),s=a(2859),p=a(3025),g=a(9019),u=a(7716),d=a(7152),m=a(7234),f=a(9997),h=a(5469),v=[{path:"",component:(i=function(){function t(o,n,a,i,r,c){e(this,t),this.router=o,this.geolocation=n,this.chRef=a,this.route=i,this.placeService=r,this.tripService=c}return o(t,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.loadMap()}},{key:"loadMap",value:function(){var e=this;this.geolocation.getCurrentPosition().then(function(t){var o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),n=g.NZ.mapOptions;n.center=o,n.mapTypeId=google.maps.MapTypeId.ROADMAP,e.map=new google.maps.Map(document.getElementById("map"),n),e.marker=new google.maps.Marker({map:e.map,position:o}),e.marker.setMap(e.map),e.findPlace(o),e.map.addListener("center_changed",function(t){var o=e.map.getCenter();e.findPlace(o)})}).catch(function(e){console.log("Error getting location",e)});var t=document.getElementById("searchbar");this.googleAutocomplete=new google.maps.places.Autocomplete(t),google.maps.event.addListener(this.googleAutocomplete,"place_changed",function(){e.lat=e.googleAutocomplete.getPlace().geometry.location.lat(),e.lng=e.googleAutocomplete.getPlace().geometry.location.lng(),e.map.panTo(new google.maps.LatLng(e.lat,e.lng)),e.findPlace(new google.maps.LatLng(e.lat,e.lng))})}},{key:"findPlace",value:function(e){var t=this,o=new google.maps.Geocoder;this.marker.setMap(null),this.marker=new google.maps.Marker({map:this.map,position:e}),this.marker.setMap(this.map),o.geocode({latLng:e},function(e,o){o==google.maps.GeocoderStatus.OK&&(t.address=e[0],console.log(t.address),t.chRef.detectChanges())})}},{key:"selectPlace",value:function(){var e=this,t=this.placeService.formatAddress(this.address);console.log(t),this.route.queryParams.subscribe(function(o){var n=o.type;"origin"==n?e.tripService.setOrigin(t.vicinity,t.location.lat,t.location.lng):"destination"==n&&e.tripService.setDestination(t.vicinity,t.location.lat,t.location.lng),e.router.navigateByUrl("/home")})}}]),t}(),i.\u0275fac=function(e){return new(e||i)(u.Y36(p.F0),u.Y36(d.b),u.Y36(u.sBO),u.Y36(p.gz),u.Y36(m.k),u.Y36(f.a))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-map"]],decls:15,vars:4,consts:[["color","dark"],["slot","start"],["type","text","id","searchbar","placeholder","search location or drag map","autofocus","",1,"locationinput"],["searchbar",""],["slot","end"],[3,"click"],[1,"place-text"],["id","map"],["map",""]],template:function(e,t){1&e&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar",0),u.TgZ(2,"ion-buttons",1),u._UZ(3,"ion-back-button"),u.qZA(),u._UZ(4,"input",2,3),u.TgZ(6,"ion-buttons",4),u.TgZ(7,"ion-button",5),u.NdJ("click",function(){return t.selectPlace()}),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"ion-content"),u.TgZ(11,"p",6),u._uU(12),u.qZA(),u._UZ(13,"div",7,8),u.qZA()),2&e&&(u.xp6(8),u.Oqu(u.lcZ(9,2,"DONE")),u.xp6(4),u.Oqu(t.address?t.address.formatted_address:""))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.YG,s.W2],pipes:[h.X$],styles:["#map[_ngcontent-%COMP%]{height:100%}.marker[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:45%;left:45%}.locationinput[_ngcontent-%COMP%]{background:#eee;border:0;outline:0;width:100%;padding:.5rem;color:#333;margin:4px;font-size:14px;border-radius:4px}.place-text[_ngcontent-%COMP%]{margin:4px 0;font-size:12px;text-align:center;color:#777}"]}),i)}],y=function(){var t=o(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[p.Bz.forChild(v)],p.Bz]}),t}(),b=((r=o(function t(){e(this,t)})).\u0275fac=function(e){return new(e||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({imports:[[c.ez,l.u5,s.Pc,h.aw,y]]}),r)}}])}();