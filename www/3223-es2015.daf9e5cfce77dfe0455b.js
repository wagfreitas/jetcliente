(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[3223],{3223:function(e,t,o){"use strict";o.r(t),o.d(t,{ProfilePageModule:function(){return f}});var n=o(8583),i=o(3679),r=o(2859),a=o(3025),s=o(5257),l=o(7716),c=o(7556),u=o(5620),d=o(1792),g=o(5469);function p(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",4),l.TgZ(2,"img",5),l.NdJ("click",function(){return l.CHM(e),l.oxw().chooseFile()}),l.qZA(),l.TgZ(3,"form",6),l.TgZ(4,"input",7),l.NdJ("change",function(){return l.CHM(e),l.oxw().upload()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(5,"ion-list",8),l.TgZ(6,"ion-item"),l.TgZ(7,"ion-label",9),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"ion-input",10),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().user.name=t}),l.qZA(),l.qZA(),l.TgZ(11,"ion-item"),l.TgZ(12,"ion-label",9),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"ion-input",11),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().user.phoneNumber=t}),l.qZA(),l.qZA(),l.TgZ(16,"ion-item"),l.TgZ(17,"ion-label",9),l._uU(18),l.ALo(19,"translate"),l.qZA(),l.TgZ(20,"ion-input",12),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().user.email=t}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"div",2),l.TgZ(22,"ion-button",13),l.NdJ("click",function(){return l.CHM(e),l.oxw().save()}),l._uU(23),l.ALo(24,"translate"),l.qZA(),l._uU(25," \xa0 \xa0 "),l.TgZ(26,"ion-button",14),l.NdJ("click",function(){return l.CHM(e),l.oxw().logout()}),l._uU(27),l.ALo(28,"translate"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.s9C("src",e.user.photoURL,l.LSH),l.xp6(6),l.Oqu(l.lcZ(9,10,"FULLNAME")),l.xp6(2),l.Q6J("ngModel",e.user.name),l.xp6(3),l.Oqu(l.lcZ(14,12,"PHONE_NUMBER")),l.xp6(2),l.Q6J("ngModel",e.user.phoneNumber)("disabled",e.user.isPhoneVerified),l.xp6(3),l.Oqu(l.lcZ(19,14,"EMAIL_ADDRESS")),l.xp6(2),l.Q6J("ngModel",e.user.email),l.xp6(3),l.Oqu(l.lcZ(24,16,"SAVE")),l.xp6(4),l.Oqu(l.lcZ(28,18,"LOGOUT"))}}const h=[{path:"",component:(()=>{class e{constructor(e,t,o,n,i){this.authService=e,this.common=t,this.router=o,this.afStorage=n,this.platform=i,this.user={}}ngOnInit(){this.authService.getUserData().then(e=>{this.authService.getUser(e.uid).snapshotChanges().pipe((0,s.q)(1)).subscribe(e=>{this.user=Object.assign({uid:e.key},e.payload.val()),console.log(this.user)})})}save(){this.authService.updateUserProfile(this.user),this.common.showToast("Updated")}chooseFile(){document.getElementById("avatar").click()}upload(){this.common.showLoader();for(let e of[document.getElementById("avatar").files[0]]){let t="/users/"+Date.now()+`_${e.name}`,o=this.afStorage.ref(t);o.put(e).then(()=>{o.getDownloadURL().subscribe(e=>{this.user.photoURL=e,this.common.hideLoader()})}).catch(e=>{this.common.hideLoader(),console.log(e)})}}logout(){this.authService.logout().then(()=>{localStorage.clear(),this.router.navigateByUrl("/login",{skipLocationChange:!0,replaceUrl:!0})})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.e),l.Y36(u.v),l.Y36(a.F0),l.Y36(d.Q1),l.Y36(r.t4))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-profile"]],decls:9,vars:4,consts:[["color","dark"],["slot","start"],[1,"ion-padding"],[4,"ngIf"],[2,"text-align","center"],["onerror","this.src='./assets/img/default.png'",2,"width","80px","height","80px","border-radius","100px",3,"src","click"],["ngNoForm",""],["id","avatar","name","file","type","file",3,"change"],["lines","none"],["position","stacked","color","primary"],["type","text",3,"ngModel","ngModelChange"],["type","text",3,"ngModel","disabled","ngModelChange"],["type","text","disabled","",3,"ngModel","ngModelChange"],["color","dark","expand","block",3,"click"],["expand","block","fill","clear","color","dark",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button"),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"ion-content",2),l.YNc(8,p,29,20,"div",3),l.qZA()),2&e&&(l.xp6(5),l.Oqu(l.lcZ(6,2,"BASIC_PROFILE")),l.xp6(3),l.Q6J("ngIf",null!=t.user&&null!=t.user))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,n.O5,r.q_,r.Ie,r.Q$,r.pK,r.j9,i.JJ,i.On,r.YG],pipes:[g.X$],styles:["#avatar[_ngcontent-%COMP%]{display:none}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(h)],a.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,i.u5,r.Pc,g.aw,Z]]}),e})()}}]);