!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkdriver=self.webpackChunkdriver||[]).push([[3223],{3223:function(n,o,i){"use strict";i.r(o),i.d(o,{ProfilePageModule:function(){return b}});var r=i(8583),a=i(3679),u=i(2859),c=i(3025),l=i(5257),s=i(7716),g=i(7556),d=i(5620),p=i(1792),f=i(5469);function h(e,n){if(1&e){var t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",4),s.TgZ(2,"img",5),s.NdJ("click",function(){return s.CHM(t),s.oxw().chooseFile()}),s.qZA(),s.TgZ(3,"form",6),s.TgZ(4,"input",7),s.NdJ("change",function(){return s.CHM(t),s.oxw().upload()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"ion-list",8),s.TgZ(6,"ion-item"),s.TgZ(7,"ion-label",9),s._uU(8),s.ALo(9,"translate"),s.qZA(),s.TgZ(10,"ion-input",10),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().user.name=e}),s.qZA(),s.qZA(),s.TgZ(11,"ion-item"),s.TgZ(12,"ion-label",9),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.TgZ(15,"ion-input",11),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().user.phoneNumber=e}),s.qZA(),s.qZA(),s.TgZ(16,"ion-item"),s.TgZ(17,"ion-label",9),s._uU(18),s.ALo(19,"translate"),s.qZA(),s.TgZ(20,"ion-input",12),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().user.email=e}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(21,"div",2),s.TgZ(22,"ion-button",13),s.NdJ("click",function(){return s.CHM(t),s.oxw().save()}),s._uU(23),s.ALo(24,"translate"),s.qZA(),s._uU(25," \xa0 \xa0 "),s.TgZ(26,"ion-button",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().logout()}),s._uU(27),s.ALo(28,"translate"),s.qZA(),s.qZA(),s.qZA()}if(2&e){var o=s.oxw();s.xp6(2),s.s9C("src",o.user.photoURL,s.LSH),s.xp6(6),s.Oqu(s.lcZ(9,10,"FULLNAME")),s.xp6(2),s.Q6J("ngModel",o.user.name),s.xp6(3),s.Oqu(s.lcZ(14,12,"PHONE_NUMBER")),s.xp6(2),s.Q6J("ngModel",o.user.phoneNumber)("disabled",o.user.isPhoneVerified),s.xp6(3),s.Oqu(s.lcZ(19,14,"EMAIL_ADDRESS")),s.xp6(2),s.Q6J("ngModel",o.user.email),s.xp6(3),s.Oqu(s.lcZ(24,16,"SAVE")),s.xp6(4),s.Oqu(s.lcZ(28,18,"LOGOUT"))}}var Z,m,v=[{path:"",component:(Z=function(){function n(t,o,i,r,a){e(this,n),this.authService=t,this.common=o,this.router=i,this.afStorage=r,this.platform=a,this.user={}}return t(n,[{key:"ngOnInit",value:function(){var e=this;this.authService.getUserData().then(function(n){e.authService.getUser(n.uid).snapshotChanges().pipe((0,l.q)(1)).subscribe(function(n){e.user=Object.assign({uid:n.key},n.payload.val()),console.log(e.user)})})}},{key:"save",value:function(){this.authService.updateUserProfile(this.user),this.common.showToast("Updated")}},{key:"chooseFile",value:function(){document.getElementById("avatar").click()}},{key:"upload",value:function(){var e=this;this.common.showLoader();for(var n=function(){var n=o[t],i="/users/"+Date.now()+"_".concat(n.name),r=e.afStorage.ref(i);r.put(n).then(function(){r.getDownloadURL().subscribe(function(n){e.user.photoURL=n,e.common.hideLoader()})}).catch(function(n){e.common.hideLoader(),console.log(n)})},t=0,o=[document.getElementById("avatar").files[0]];t<o.length;t++)n()}},{key:"logout",value:function(){var e=this;this.authService.logout().then(function(){localStorage.clear(),e.router.navigateByUrl("/login",{skipLocationChange:!0,replaceUrl:!0})})}}]),n}(),Z.\u0275fac=function(e){return new(e||Z)(s.Y36(g.e),s.Y36(d.v),s.Y36(c.F0),s.Y36(p.Q1),s.Y36(u.t4))},Z.\u0275cmp=s.Xpm({type:Z,selectors:[["app-profile"]],decls:9,vars:4,consts:[["color","dark"],["slot","start"],[1,"ion-padding"],[4,"ngIf"],[2,"text-align","center"],["onerror","this.src='./assets/img/default.png'",2,"width","80px","height","80px","border-radius","100px",3,"src","click"],["ngNoForm",""],["id","avatar","name","file","type","file",3,"change"],["lines","none"],["position","stacked","color","primary"],["type","text",3,"ngModel","ngModelChange"],["type","text",3,"ngModel","disabled","ngModelChange"],["type","text","disabled","",3,"ngModel","ngModelChange"],["color","dark","expand","block",3,"click"],["expand","block","fill","clear","color","dark",3,"click"]],template:function(e,n){1&e&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar",0),s.TgZ(2,"ion-buttons",1),s._UZ(3,"ion-back-button"),s.qZA(),s.TgZ(4,"ion-title"),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"ion-content",2),s.YNc(8,h,29,20,"div",3),s.qZA()),2&e&&(s.xp6(5),s.Oqu(s.lcZ(6,2,"BASIC_PROFILE")),s.xp6(3),s.Q6J("ngIf",null!=n.user&&null!=n.user))},directives:[u.Gu,u.sr,u.Sm,u.oU,u.cs,u.wd,u.W2,r.O5,u.q_,u.Ie,u.Q$,u.pK,u.j9,a.JJ,a.On,u.YG],pipes:[f.X$],styles:["#avatar[_ngcontent-%COMP%]{display:none}"]}),Z)}],A=function(){var n=t(function n(){e(this,n)});return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[c.Bz.forChild(v)],c.Bz]}),n}(),b=((m=t(function n(){e(this,n)})).\u0275fac=function(e){return new(e||m)},m.\u0275mod=s.oAB({type:m}),m.\u0275inj=s.cJS({imports:[[r.ez,a.u5,u.Pc,f.aw,A]]}),m)}}])}();